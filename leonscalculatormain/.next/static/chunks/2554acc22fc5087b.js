(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96070,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(99875);function a(){let e=(0,r.useRef)(null),[a,s]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),[i,d]=(0,r.useState)([]),[c,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[p,h]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[v,g]=(0,r.useState)(!1),N=(0,l.createClient)();(0,r.useEffect)(()=>{!async function(){try{let{data:e,error:t}=await N.from("wood_profiles").select("*").order("created_at",{ascending:!0});if(t)throw t;e&&e.length>0&&(d(e),x(e[0]))}catch(e){console.error("Error loading profiles:",e),o("Failed to load wood profiles")}finally{m(!1)}}()},[]);let w=async e=>{if(e.preventDefault(),!p&&!f)return void alert("Before you go, what is your name? We'd like to know your project idea ðŸ¤­");try{await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,email:f.includes("@")?f:null,phone:f.includes("@")?null:f,notes:j,projectType:"ar-camera-visualizer",selected_wood_id:c?.id??null,source:"ar-camera"})}),g(!0),window.open("https://calendar.leonshardwood.com/widget/booking/4UHrntvfTwqklVXXfarP","_blank")}catch(e){console.error("Error sending lead:",e)}};return((0,r.useEffect)(()=>{let t=null;return async function(){try{o(null);let r=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});t=r,e.current&&(e.current.srcObject=r,await e.current.play()),s(!0)}catch(e){console.error("Camera error",e),o("We couldn't access your camera. Check browser permissions or try on your phone."),s(!1)}}(),()=>{t&&t.getTracks().forEach(e=>e.stop())}},[]),u)?(0,t.jsx)("div",{className:"min-h-screen bg-neutral-950 text-neutral-50 flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-sm text-neutral-400",children:"Loading wood profiles..."})}):0===i.length?(0,t.jsxs)("div",{className:"min-h-screen bg-neutral-950 text-neutral-50 flex items-center justify-center flex-col gap-4 px-4",children:[(0,t.jsx)("p",{className:"text-neutral-400",children:"No wood profiles available yet."}),(0,t.jsx)("a",{href:"/admin/wood-profiles",className:"px-4 py-2 bg-emerald-500 text-emerald-950 rounded-lg font-semibold hover:bg-emerald-400 transition",children:"Add Wood Profiles"})]}):(0,t.jsxs)("main",{className:"min-h-screen bg-neutral-950 text-neutral-50 flex flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col border-b border-neutral-800 md:border-b-0 md:border-r md:min-h-screen",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-sm font-semibold tracking-wide",children:"Leon's â€¢ Camera Floor Preview"}),(0,t.jsx)("p",{className:"text-[11px] text-neutral-400",children:"Point at your room and switch between floor profiles in real time."})]}),(0,t.jsx)("span",{className:"rounded-full border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-[10px] text-emerald-200",children:"Beta Visualizer"})]}),(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center bg-black relative overflow-hidden",children:[(0,t.jsx)("video",{ref:e,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),!a&&!n&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-xs text-neutral-400",children:"Initializing cameraâ€¦"})}),n&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 px-4",children:(0,t.jsx)("p",{className:"text-xs text-red-300 text-center max-w-xs",children:n})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-6 border border-white/10 rounded-2xl"}),c?.texture_url&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-30 mix-blend-overlay",children:(0,t.jsx)("img",{src:c.texture_url||"/placeholder.svg",alt:"",className:"w-full h-full object-cover"})})]}),(0,t.jsx)("div",{className:"px-4 py-3 border-t border-neutral-800 flex items-center justify-between gap-2",children:(0,t.jsx)("a",{href:"/",className:"text-[11px] text-neutral-400 hover:text-neutral-200",children:"â† Back to calculator"})})]}),(0,t.jsxs)("aside",{className:"w-full md:w-80 bg-neutral-900/90 border-t border-neutral-800 md:border-t-0 md:border-l flex flex-col max-h-[60vh] md:max-h-none",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-neutral-800",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-neutral-400",children:"Floor profiles"}),(0,t.jsx)("p",{className:"text-xs text-neutral-300",children:"Tap through wood options while you point the camera at your space."})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-3 py-2 space-y-2 text-xs",children:i.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>x(e),className:`w-full text-left rounded-lg border px-3 py-2 transition ${c?.id===e.id?"border-emerald-400 bg-emerald-500/10 text-emerald-50":"border-neutral-700 bg-neutral-950 text-neutral-200 hover:border-neutral-500"}`,children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-[10px] text-neutral-400",children:[e.wood_type," â€¢ ",e.finish]})]},e.id))}),c&&(0,t.jsxs)("div",{className:"border-t border-neutral-800 px-4 py-3 text-[11px] space-y-1",children:[(0,t.jsx)("p",{className:"text-neutral-400",children:"Selected profile"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-neutral-50",children:c.name}),(0,t.jsxs)("p",{className:"text-neutral-300",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Wood Type:"})," ",c.wood_type]}),(0,t.jsxs)("p",{className:"text-neutral-300",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Finish:"})," ",c.finish]}),(0,t.jsxs)("p",{className:"text-neutral-300",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Color:"})," ",c.color]}),(0,t.jsx)("p",{className:"text-neutral-300 mb-2",children:c.description}),(0,t.jsxs)("p",{className:"text-emerald-300 font-medium",children:["Est. $",c.price_per_sqft,"/sq ft installed"]}),(0,t.jsx)("p",{className:"text-[10px] text-neutral-500 pt-1",children:"For exact pricing, schedule a site visit. A formal written proposal will then be prepared for you to review."})]}),(0,t.jsx)("div",{className:"border-t border-neutral-800 px-4 py-3",children:v?(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("p",{className:"text-xs text-emerald-400 mb-2",children:"Thanks! We'll be in touch soon."})}):(0,t.jsxs)("form",{onSubmit:w,className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-[11px] text-neutral-400 mb-2",children:"Love this profile? Let's connect:"}),(0,t.jsx)("input",{type:"text",placeholder:"Your name",value:p,onChange:e=>h(e.target.value),className:"w-full rounded-lg border border-neutral-700 bg-neutral-950 px-3 py-2 text-xs text-neutral-100"}),(0,t.jsx)("input",{type:"text",placeholder:"Email or phone",value:f,onChange:e=>b(e.target.value),className:"w-full rounded-lg border border-neutral-700 bg-neutral-950 px-3 py-2 text-xs text-neutral-100"}),(0,t.jsx)("textarea",{placeholder:"Any notes or questions?",value:j,onChange:e=>y(e.target.value),rows:2,className:"w-full rounded-lg border border-neutral-700 bg-neutral-950 px-3 py-2 text-xs text-neutral-100"}),(0,t.jsx)("button",{type:"submit",className:"w-full py-2 bg-emerald-500 text-emerald-950 rounded-lg text-xs font-semibold hover:bg-emerald-400 transition",children:"Schedule Site Visit"})]})})]})]})}e.s(["default",()=>a])}]);